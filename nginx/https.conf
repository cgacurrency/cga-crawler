server {
	listen 443 ssl http2;
	server_name cganode.com;

	ssl_certificate /root/ssl/server.pem;
	ssl_certificate_key /root/ssl/server.key;

	
	root /var/www/cga-crawler/build;
	index index.html;
	
	# set max upload size
	client_max_body_size 2G;
	fastcgi_buffers 64 4K;
	
	access_log /var/log/nginx/https_access.log combined;
	error_log /var/log/nginx/https_error.log;
		
	location = /favicon.ico {
		log_not_found off;
		access_log off;
	}

	location = /robots.txt {
		allow all;
		log_not_found off;
		access_log off;
	}	

	location / {
		try_files $uri $uri/ /index.html =404;
	}

	
	location ~* \.(htaccess|htpasswd) {
		deny all;
	}
	
	# set long EXPIRES header on static assets
	location ~* \.(?:jpg|jpeg|gif|bmp|ico|png|css|js|swf)$ {
		expires 30d;
		access_log off;
	}
	
}


server {
        listen 443 ssl http2;
        server_name api.cganode.com;

        ssl_certificate /root/ssl/server.pem;
        ssl_certificate_key /root/ssl/server.key;


        
        # set max upload size
        client_max_body_size 2G;
        fastcgi_buffers 64 4K;

        
        location = /favicon.ico {
                log_not_found off;
                access_log off;
        }

        location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
        }

        location / {
		proxy_pass_header Authorization;
		proxy_pass http://localhost:3001;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#		add_header 'Access-Control-Allow-Origin' '*';
		proxy_http_version 1.1;
		proxy_set_header Connection "";
		proxy_buffering off;
		client_max_body_size 0;
		proxy_read_timeout 36000s;
		proxy_redirect off;
		proxy_ssl_session_reuse off;
        }


        location ~* \.(htaccess|htpasswd) {
                deny all;
        }

        # set long EXPIRES header on static assets
        location ~* \.(?:jpg|jpeg|gif|bmp|ico|png|css|js|swf)$ {
                expires 30d;
                access_log off;
        }

}




server {
        listen 443 ssl http2;
        server_name ws.cganode.com;

        ssl_certificate /root/ssl/server.pem;
        ssl_certificate_key /root/ssl/server.key;



        # set max upload size
        client_max_body_size 2G;
        fastcgi_buffers 64 4K;


        location = /favicon.ico {
                log_not_found off;
                access_log off;
        }

        location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
        }

        location / {
		proxy_pass http://localhost:1884;
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection "Upgrade";
        }


        location ~* \.(htaccess|htpasswd) {
                deny all;
        }

        # set long EXPIRES header on static assets
        location ~* \.(?:jpg|jpeg|gif|bmp|ico|png|css|js|swf)$ {
                expires 30d;
                access_log off;
        }

}





server {
        listen 443 ssl http2;
        server_name finehook.cganode.com;

        ssl_certificate /root/ssl/server.pem;
        ssl_certificate_key /root/ssl/server.key;



        # set max upload size
        client_max_body_size 2G;
        fastcgi_buffers 64 4K;


        location = /favicon.ico {
                log_not_found off;
                access_log off;
        }

        location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
        }

        location / {
                proxy_pass http://localhost:8181;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "Upgrade";
        }


        location ~* \.(htaccess|htpasswd) {
                deny all;
        }

        # set long EXPIRES header on static assets
        location ~* \.(?:jpg|jpeg|gif|bmp|ico|png|css|js|swf)$ {
                expires 30d;
                access_log off;
        }

}




